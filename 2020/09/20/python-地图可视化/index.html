<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">






  
  
  <link rel="stylesheet" media="all" href="/xiangyang/lib/Han/dist/han.min.css?v=3.3">




<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/xiangyang/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/xiangyang/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/xiangyang/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/xiangyang/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/xiangyang/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/xiangyang/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/xiangyang/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="地图," />










<meta name="description" content="介绍Folium是一个基于leaflet.js的Python地图库，其中，Leaflet是一个非常轻的前端地图可视化库。即可以使用Python语言调用Leaflet的地图可视化能力。它不单单可以在地图上展示数据的分布图，还可以使用Vincent/Vega在地图上加以标记。Folium可以让你用Python强大生态系统来处理数据，然后用Leaflet地图来展示。
Folium中有许多来自OpenSt">
<meta property="og:type" content="article">
<meta property="og:title" content="python-地图可视化">
<meta property="og:url" content="https://youxiangyang.github.io/2020/09/20/python-地图可视化/index.html">
<meta property="og:site_name" content="Udata">
<meta property="og:description" content="介绍Folium是一个基于leaflet.js的Python地图库，其中，Leaflet是一个非常轻的前端地图可视化库。即可以使用Python语言调用Leaflet的地图可视化能力。它不单单可以在地图上展示数据的分布图，还可以使用Vincent/Vega在地图上加以标记。Folium可以让你用Python强大生态系统来处理数据，然后用Leaflet地图来展示。
Folium中有许多来自OpenSt">
<meta property="og:updated_time" content="2020-09-20T14:53:15.426Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="python-地图可视化">
<meta name="twitter:description" content="介绍Folium是一个基于leaflet.js的Python地图库，其中，Leaflet是一个非常轻的前端地图可视化库。即可以使用Python语言调用Leaflet的地图可视化能力。它不单单可以在地图上展示数据的分布图，还可以使用Vincent/Vega在地图上加以标记。Folium可以让你用Python强大生态系统来处理数据，然后用Leaflet地图来展示。
Folium中有许多来自OpenSt">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/xiangyang/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://youxiangyang.github.io/2020/09/20/python-地图可视化/"/>





  <title>python-地图可视化 | Udata</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/xiangyang/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Udata</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">富强 民主 文明 和谐 自由 平等 公正 法治 爱国 敬业 诚信 友善</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/xiangyang/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/xiangyang/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/xiangyang/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/xiangyang/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/xiangyang/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://youxiangyang.github.io/xiangyang/2020/09/20/python-地图可视化/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="xiangyang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/xiangyang/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Udata">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">python-地图可视化</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-09-20T19:55:57+08:00">
                2020-09-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/xiangyang/categories/数据分析/" itemprop="url" rel="index">
                    <span itemprop="name">数据分析</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        <h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>Folium是一个基于leaflet.js的Python地图库，其中，Leaflet是一个非常轻的前端地图可视化库。即可以使用Python语言调用Leaflet的地图可视化能力。它不单单可以在地图上展示数据的分布图，还可以使用Vincent/Vega在地图上加以标记。Folium可以让你用Python强大生态系统来处理数据，然后用Leaflet地图来展示。</p>
<p>Folium中有许多来自OpenStreetMap、MapQuest Open、MapQuestOpen Aerial、Mapbox和Stamen的内建地图元件，而且支持使用Mapbox或Cloudmade的API密钥来定制个性化的地图元件。Folium支持GeoJSON和TopoJSON两种文件格式的叠加，也可以将数据连接到这两种文件格式的叠加层，最后可使用color-brewer配色方案创建分布图。</p>
<h2 id="Folium使用"><a href="#Folium使用" class="headerlink" title="Folium使用"></a>Folium使用</h2><p>使用案例:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> folium</div><div class="line">m=folium.Map(location=[<span class="number">39.086370</span>,<span class="number">117.213135</span>],width=<span class="number">500</span>,height=<span class="number">300</span>,zoom_start=<span class="number">14</span>)</div><div class="line">m.save(<span class="string">"index.html"</span>)</div></pre></td></tr></table></figure>
<p><strong>参数说明:</strong></p>
<ul>
<li>location (tuple or list, default None)：<strong>纬度和经度</strong></li>
<li>width (pixel int or percentage string (default: ‘100%’))：地图宽度</li>
<li>height (pixel int or percentage string (default: ‘100%’))：地图高度</li>
<li>tiles (str, default ‘OpenStreetMap’) ：瓦片名称或使用TileLayer classass.</li>
<li>min_zoom (int, default 0)： 地图可缩放的最小级别</li>
<li>max_zoom (int, default 18)： 地图可缩放的最大级别</li>
<li>zoom_start (int, default 10) ： 地图的初始缩放级别</li>
<li>attr (string, default None)：当使用自定义瓦片时，传入自定义瓦片的名词</li>
<li>crs (str, default ‘EPSG3857’) ：投影坐标系标识<ul>
<li>EPSG3857: Web墨卡托投影后的平面地图，坐标单位为米。大部分国外地图使用的时该标准。</li>
<li>EPSG4326: Web墨卡托投影后的平面地图，但仍然使用WGS84的经度、纬度表示坐标。</li>
<li>EPSG3395: 墨卡托投影，主要用于航海图</li>
<li>Simple: 简单的x，y匹配，用于自定义瓦片(比如游戏地图)</li>
</ul>
</li>
<li>control_scale (bool, default False) ：是否在地图上显示缩放标尺</li>
<li>zoom_control (bool, default True) ：是否要限制zoom操作</li>
<li>**kwargs：Leaflets地图类的其他参数: <a href="https://leafletjs.com/reference-1.5.1.html#map" target="_blank" rel="external">https://leafletjs.com/reference-1.5.1.html#map</a></li>
</ul>
<p><strong>坐标系说明:</strong>目前国内常见的坐标系主要分为三类:</p>
<ul>
<li>地球坐标系WGS84: 常见于GPS设备,google地图等国际标准的坐标系</li>
<li>火星坐标系GCJ-02:国内使用的被强制加密后的坐标系,比如高德坐标系</li>
<li>百度坐标系BD-09:百度地图使用的坐标系,在火星坐标系的基础上又进行了一次加密处理.</li>
</ul>
<p>在设置title的时候,需要考虑经纬度属于哪种坐标系.</p>
<p><strong>添加点\线\面要素</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> folium</div><div class="line">m = folium.Map(location=[<span class="number">39.917834</span>, <span class="number">116.397036</span>], zoom_start=<span class="number">13</span>, width=<span class="string">'100%'</span>,height=<span class="string">'50%'</span>, zoom_control=<span class="string">'False'</span>,</div><div class="line">               tiles=<span class="string">'http://webrd02.is.autonavi.com/appmaptile?lang=zh_cn&amp;size=1&amp;scale=1&amp;style=8&amp;x=&#123;x&#125;&amp;y=&#123;y&#125;&amp;z=&#123;z&#125;&amp;ltype=6'</span>,attr=<span class="string">'AutoNavi'</span>)</div><div class="line">tooltip =<span class="string">'请点击我查看该点信息'</span></div><div class="line">folium.Marker([<span class="number">39.937282</span>,<span class="number">116.403187</span>], popup=<span class="string">'南锣鼓巷'</span>,tooltip=tooltip).add_to(m)</div><div class="line">folium.Marker([<span class="number">39.917834</span>,<span class="number">116.397036</span>], popup=<span class="string">'故宫'</span>,tooltip=tooltip).add_to(m)</div><div class="line">folium.Marker([<span class="number">39.928614</span>,<span class="number">116.391746</span>], popup=<span class="string">'北海公园'</span>, tooltip=tooltip, icon=folium.Icon(color=<span class="string">'red'</span>)).add_to(m)</div><div class="line">folium.Marker([<span class="number">39.942143</span>,<span class="number">116.382590</span>], popup=<span class="string">'后海公园'</span>, tooltip=tooltip, icon=folium.Icon(color=<span class="string">'green'</span>, prefix=<span class="string">'fa'</span>, icon=<span class="string">'taxi'</span>)).add_to(m)</div><div class="line">m</div></pre></td></tr></table></figure>
<p>Folium.Icon类可以设置color, icon_color, icon, angle, prefix这5个参数：</p>
<ul>
<li>color的可选项包括：[‘red’, ‘blue’, ‘green’, ‘purple’, ‘orange’, ‘darkred’, ‘lightred’, ‘beige’, ‘darkblue’, ‘darkgreen’, ‘cadetblue’, ‘darkpurple’, ‘white’, ‘pink’, ‘lightblue’, ‘lightgreen’, ‘gray’, ‘black’, ‘lightgray’] ，或者HTML颜色代码</li>
<li>icon_color同上</li>
<li>icon可以在Font-Awesome网站中找到对应的名字，并设置prefix参数为’fa’</li>
<li>angle以度为单位设置</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">m.add_child(folium.LatLngPopup()) <span class="comment">#显示鼠标点击点经纬度</span></div><div class="line">m.add_child(folium.ClickForMarker(popup=<span class="string">'Waypoint'</span>)) <span class="comment"># 将鼠标点击点添加到地图上</span></div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 添加圆</span></div><div class="line">folium.Circle(</div><div class="line">    radius=<span class="number">300</span>,</div><div class="line">    location=[<span class="number">39.928614</span>,<span class="number">116.391746</span>],</div><div class="line">    popup=<span class="string">'北海公园'</span>,</div><div class="line">    color=<span class="string">'crimson'</span>,</div><div class="line">    fill=<span class="keyword">False</span>,</div><div class="line">).add_to(m)</div><div class="line">folium.CircleMarker(</div><div class="line">    location=[<span class="number">39.942143</span>,<span class="number">116.382590</span>],</div><div class="line">    radius=<span class="number">50</span>,</div><div class="line">    popup=<span class="string">'后海公园'</span>,</div><div class="line">    color=<span class="string">'#3186cc'</span>,</div><div class="line">    fill=<span class="keyword">True</span>,</div><div class="line">    fill_color=<span class="string">'#3186cc'</span></div><div class="line">).add_to(m)</div><div class="line"></div><div class="line">m</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 添加线段</span></div><div class="line"></div><div class="line">folium.PolyLine([</div><div class="line">    [<span class="number">39.917834</span>,<span class="number">116.397036</span>],</div><div class="line">    [<span class="number">39.928614</span>,<span class="number">116.391746</span>],</div><div class="line">    [<span class="number">39.937282</span>,<span class="number">116.403187</span>],</div><div class="line">    [<span class="number">39.942143</span>,<span class="number">116.382590</span>]</div><div class="line">],color=<span class="string">'red'</span>).add_to(m)</div><div class="line"></div><div class="line">m</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 添加多边形</span></div><div class="line"></div><div class="line">folium.Polygon([</div><div class="line">    [<span class="number">39.917834</span>,<span class="number">116.397036</span>],</div><div class="line">    [<span class="number">39.928614</span>,<span class="number">116.391746</span>],</div><div class="line">    [<span class="number">39.942143</span>,<span class="number">116.382590</span>],</div><div class="line">    [<span class="number">39.937282</span>,<span class="number">116.403187</span>],</div><div class="line">],color=<span class="string">'blue'</span>,fill=<span class="keyword">True</span>,fill_color=<span class="string">'blue'</span>,fill_opacity=<span class="number">0.2</span>).add_to(m)</div><div class="line">m</div></pre></td></tr></table></figure>
<h2 id="各地图提供商瓦片服务地图规则"><a href="#各地图提供商瓦片服务地图规则" class="headerlink" title="各地图提供商瓦片服务地图规则"></a>各地图提供商瓦片服务地图规则</h2><h3 id="高德地图"><a href="#高德地图" class="headerlink" title="高德地图"></a>高德地图</h3><p>目前高德的瓦片地址有如下两种：</p>
<ul>
<li><a href="http://wprd0{1-4}.is.autonavi.com/appmaptile?x={x}&amp;y={y}&amp;z={z}&amp;lang=zh_cn&amp;size=1&amp;scl=1&amp;style=7&amp;ltype=1" target="_blank" rel="external">http://wprd0{1-4}.is.autonavi.com/appmaptile?x={x}&amp;y={y}&amp;z={z}&amp;lang=zh_cn&amp;size=1&amp;scl=1&amp;style=7&amp;ltype=1</a></li>
<li><a href="http://webst0{1-4}.is.autonavi.com/appmaptile?style=7&amp;x={x}&amp;y={y}&amp;z={z}" target="_blank" rel="external">http://webst0{1-4}.is.autonavi.com/appmaptile?style=7&amp;x={x}&amp;y={y}&amp;z={z}</a></li>
</ul>
<p>前者是高德的新版地址，后者是老版地址。</p>
<p>高德新版的参数：</p>
<ul>
<li>lang：可以通过zh_cn设置中文，en设置英文</li>
<li>size：基本无作用</li>
<li>scl：瓦片尺寸控制，1=256,2=512</li>
<li>style：设置影像和路网，style=6为影像图，style=7为矢量路网，style=8为影像路网</li>
<li>ltype：线性控制，增加后，只对地图要素进行控制，没有文字注记，要素多少，是否透明</li>
</ul>
<p>这些规律并不是绝对的，有可能有的组合某些参数不起作用。</p>
<h3 id="谷歌地图"><a href="#谷歌地图" class="headerlink" title="谷歌地图"></a>谷歌地图</h3><p>目前谷歌的瓦片地址也存在两种：</p>
<ul>
<li>国内：<a href="http://mt{0-3}.google.cn/vt/lyrs=m&amp;hl=zh-CN&amp;gl=cn&amp;x={x}&amp;y={y}&amp;z={z}" target="_blank" rel="external">http://mt{0-3}.google.cn/vt/lyrs=m&amp;hl=zh-CN&amp;gl=cn&amp;x={x}&amp;y={y}&amp;z={z}</a></li>
<li>国外：<a href="http://mt{0-3}.google.com/vt/lyrs=m&amp;hl=zh-CN&amp;gl=cn&amp;x={x}&amp;y={y}&amp;z={z}" target="_blank" rel="external">http://mt{0-3}.google.com/vt/lyrs=m&amp;hl=zh-CN&amp;gl=cn&amp;x={x}&amp;y={y}&amp;z={z}</a></li>
</ul>
<p>参数详解：</p>
<ul>
<li>lyrs = 类型<ul>
<li>h = roads only 仅限道路</li>
<li>m = standard roadmap 标准路线图</li>
<li>p = terrain 地形</li>
<li>r = somehow altered roadmap 某种改变的路线图</li>
<li>s = satellite only 仅限卫星</li>
<li>t = terrain only 仅限地形</li>
<li>y = hybrid 带标签的卫星图</li>
</ul>
</li>
<li>gl = 坐标系<ul>
<li>CN = 中国火星坐标系</li>
</ul>
</li>
<li>hl = 地图文字语言<ul>
<li>zh-CN = 中文</li>
<li>en-US = 英文</li>
</ul>
</li>
<li>x = 瓦片横坐标</li>
<li>y = 瓦片纵坐标</li>
<li>z = 缩放级别 卫星图0-14,路线图0-17</li>
</ul>
<h3 id="百度地图"><a href="#百度地图" class="headerlink" title="百度地图"></a>百度地图</h3><p>百度当前的瓦片地址：</p>
<ul>
<li><a href="http://online{0-4}.map.bdimg.com/onlinelabel/?qt=tile&amp;x={x}&amp;y={y}&amp;z={z}&amp;styles=pl&amp;udt=202004151&amp;scaler=2&amp;p=0" target="_blank" rel="external">http://online{0-4}.map.bdimg.com/onlinelabel/?qt=tile&amp;x={x}&amp;y={y}&amp;z={z}&amp;styles=pl&amp;udt=202004151&amp;scaler=2&amp;p=0</a></li>
<li><a href="http://api{0-3}.map.bdimg.com/customimage/tile?&amp;x={x}&amp;y={y}&amp;z={z}&amp;udt=20180601&amp;scale=1" target="_blank" rel="external">http://api{0-3}.map.bdimg.com/customimage/tile?&amp;x={x}&amp;y={y}&amp;z={z}&amp;udt=20180601&amp;scale=1</a></li>
<li><a href="http://its.map.baidu.com:8002/traffic/TrafficTileService?level={z}&amp;x={x}&amp;y={y}&amp;time=1373790856265&amp;label=web2D&amp;;v=017" target="_blank" rel="external">http://its.map.baidu.com:8002/traffic/TrafficTileService?level={z}&amp;x={x}&amp;y={y}&amp;time=1373790856265&amp;label=web2D&amp;;v=017</a></li>
</ul>
<p>备注：瓦片地址中的x和y对应的并不是经纬度值，而是瓦片编号，中国主要地图商的瓦片编号流派：</p>
<table>
<thead>
<tr>
<th>地图商</th>
<th>瓦片编码</th>
</tr>
</thead>
<tbody>
<tr>
<td>高德地图</td>
<td>谷歌XYZ</td>
</tr>
<tr>
<td>谷歌地图</td>
<td>谷歌XYZ</td>
</tr>
<tr>
<td>OpenStreetMap</td>
<td>谷歌XYZ</td>
</tr>
<tr>
<td>腾讯地图</td>
<td>TMS</td>
</tr>
<tr>
<td>Bing地图</td>
<td>QuadTree</td>
</tr>
<tr>
<td>百度地图</td>
<td>百度XYZ</td>
</tr>
</tbody>
</table>
<p><strong>其他参考资料：</strong></p>
<ul>
<li><a href="https://github.com/geometalab/pyGeoTile" target="_blank" rel="external">https://github.com/geometalab/pyGeoTile</a></li>
<li><a href="https://github.com/anzhihun/OpenLayers3Primer/blob/master/ch05/05-03.md" target="_blank" rel="external">https://github.com/anzhihun/OpenLayers3Primer/blob/master/ch05/05-03.md</a></li>
<li><a href="http://www.winseliu.com/blog/2018/01/30/map-started-guide/" target="_blank" rel="external">http://www.winseliu.com/blog/2018/01/30/map-started-guide/</a></li>
<li><a href="https://github.com/CntChen/tile-lnglat-transform" target="_blank" rel="external">https://github.com/CntChen/tile-lnglat-transform</a></li>
</ul>
<p><strong>腾讯地图的瓦片地图URL格式：</strong></p>
<ul>
<li><a href="http://rt1.map.gtimg.com/realtimerender?z={z}&amp;x={x}&amp;y={y}&amp;type=vector&amp;style=0" target="_blank" rel="external">http://rt1.map.gtimg.com/realtimerender?z={z}&amp;x={x}&amp;y={y}&amp;type=vector&amp;style=0</a></li>
</ul>
<p>由于腾讯地图使用的瓦片编码时TMS，所以使用时需要额外的设置。具体如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 腾讯地图</span></div><div class="line">m2=folium.Map(location=[<span class="number">39.917834</span>, <span class="number">116.397036</span>])</div><div class="line">folium.TileLayer(tms=<span class="string">"true"</span>,tiles=<span class="string">"http://rt1.map.gtimg.com/realtimerender?z=&#123;z&#125;&amp;x=&#123;x&#125;&amp;y=&#123;y&#125;&amp;type=vector&amp;style=0"</span>,attr=<span class="string">"Tencent"</span>).add_to(m2)</div><div class="line">m2</div></pre></td></tr></table></figure>
<p>参考链接：</p>
<ul>
<li><a href="https://leafletjs.com/" target="_blank" rel="external">https://leafletjs.com/</a></li>
<li><a href="https://python-visualization.github.io/folium/" target="_blank" rel="external">https://python-visualization.github.io/folium/</a></li>
<li><a href="https://www.biaodianfu.com/coordinates-tile.html" target="_blank" rel="external">https://www.biaodianfu.com/coordinates-tile.html</a></li>
<li><a href="http://openwhatevermap.xyz/" target="_blank" rel="external">http://openwhatevermap.xyz/</a></li>
<li><a href="https://www.biaodianfu.com/coordinates-tile.html" target="_blank" rel="external">https://www.biaodianfu.com/coordinates-tile.html</a></li>
</ul>
<h2 id="geojson"><a href="#geojson" class="headerlink" title="geojson"></a>geojson</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> requests</div><div class="line"></div><div class="line">url=<span class="string">"https://geo.datav.aliyun.com/areas_v2/bound/120000_full.json"</span></div><div class="line"></div><div class="line">tj=requests.get(url).text</div><div class="line"></div><div class="line"><span class="comment"># 腾讯地图</span></div><div class="line">m2=folium.Map(location=[<span class="number">37.77</span>, <span class="number">-122.42</span>])</div><div class="line">folium.TileLayer(tms=<span class="string">"true"</span>,tiles=<span class="string">"http://rt1.map.gtimg.com/realtimerender?z=&#123;z&#125;&amp;x=&#123;x&#125;&amp;y=&#123;y&#125;&amp;type=vector&amp;style=0"</span>,attr=<span class="string">"Tencent"</span>).add_to(m2)</div><div class="line"></div><div class="line">folium.GeoJson(tj,</div><div class="line">        style_function=<span class="keyword">lambda</span> feature:&#123;</div><div class="line">            <span class="string">'fillColor'</span>: <span class="string">'#ffff00'</span>,</div><div class="line">            <span class="string">'color'</span>: <span class="string">'blue'</span>,</div><div class="line">            <span class="string">'weight'</span>: <span class="number">2</span>,</div><div class="line">            <span class="string">'dashArray'</span>: <span class="string">'5, 5'</span></div><div class="line">        &#125;</div><div class="line">              ).add_to(m2)</div><div class="line">m2</div></pre></td></tr></table></figure>
<h2 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"><span class="keyword">import</span> folium</div><div class="line"></div><div class="line"><span class="comment"># 腾讯地图</span></div><div class="line">m2=folium.Map(location=[<span class="number">37.77</span>, <span class="number">-122.42</span>])</div><div class="line">folium.TileLayer(tms=<span class="string">"true"</span>,tiles=<span class="string">"http://rt1.map.gtimg.com/realtimerender?z=&#123;z&#125;&amp;x=&#123;x&#125;&amp;y=&#123;y&#125;&amp;type=vector&amp;style=0"</span>,attr=<span class="string">"Tencent"</span>).add_to(m2)</div><div class="line"></div><div class="line">df=pd.read_csv(<span class="string">'Police_Department_Incidents_-_Previous_Year__2016_.csv'</span>)</div><div class="line"></div><div class="line">df.head()</div><div class="line"></div><div class="line">data=df.iloc[<span class="number">0</span>:<span class="number">10</span>,:]</div><div class="line"></div><div class="line">incidents=folium.map.FeatureGroup()</div><div class="line"></div><div class="line"><span class="keyword">for</span> lat,lng <span class="keyword">in</span> zip(data.Y,data.X):</div><div class="line">    incidents.add_child(</div><div class="line">        folium.CircleMarker(</div><div class="line">            [lat,lng],</div><div class="line">            radius=<span class="number">7</span>,</div><div class="line">            color=<span class="string">'yellow'</span>,</div><div class="line">            fill=<span class="keyword">True</span>,</div><div class="line">            fill_color=<span class="string">'red'</span>,</div><div class="line">            fill_opacity=<span class="number">0.3</span></div><div class="line">        )</div><div class="line">    )</div><div class="line">m2.add_child(incidents)</div><div class="line"></div><div class="line"><span class="keyword">from</span> folium <span class="keyword">import</span> plugins</div><div class="line"></div><div class="line">incidents=plugins.MarkerCluster().add_to(m2)</div><div class="line"></div><div class="line"><span class="keyword">for</span> lat,lng,label <span class="keyword">in</span> zip(data.Y,data.X,data.Category):</div><div class="line">    folium.Marker(</div><div class="line">        location=[lat,lng],</div><div class="line">        icon=<span class="keyword">None</span>,</div><div class="line">        popup=label</div><div class="line">    ).add_to(incidents)</div><div class="line">m2.add_child(incidents)</div></pre></td></tr></table></figure>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/xiangyang/tags/地图/" rel="tag"># 地图</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/xiangyang/2019/10/07/10月计划/" rel="next" title="10月计划">
                <i class="fa fa-chevron-left"></i> 10月计划
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/xiangyang/2020/12/06/hello-world/" rel="prev" title="Hello World">
                Hello World <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">xiangyang</p>
              <p class="site-description motion-element" itemprop="description">学习笔记</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/xiangyang/archives/">
              
                  <span class="site-state-item-count">17</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/xiangyang/categories/index.html">
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/xiangyang/tags/index.html">
                  <span class="site-state-item-count">14</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#介绍"><span class="nav-text">介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Folium使用"><span class="nav-text">Folium使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#各地图提供商瓦片服务地图规则"><span class="nav-text">各地图提供商瓦片服务地图规则</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#高德地图"><span class="nav-text">高德地图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#谷歌地图"><span class="nav-text">谷歌地图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#百度地图"><span class="nav-text">百度地图</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#geojson"><span class="nav-text">geojson</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Demo"><span class="nav-text">Demo</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">xiangyang</span>

  
</div>









        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/xiangyang/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/xiangyang/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/xiangyang/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/xiangyang/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/xiangyang/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/xiangyang/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/xiangyang/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/xiangyang/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/xiangyang/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/xiangyang/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/xiangyang/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
